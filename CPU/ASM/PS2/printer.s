NOP
NOP
NOP
NOP

;R0 keyboard data
;R1 counter of row
;R2 counter of col
;R3 decounter of col
;R4
;R5 VGA pos
;R6 0XBF0E 0XBF0A 0XBF0D
;R7 VGA data

INIT:
LI R3 0X0050
LI R4 0X001E
LI R0 0X0020
  NEXT_ROW:
  ADDIU R3 0XFFFF
    NEXT_COL:
    ADDIU R4 0XFFFF
    SLL R5 R3 0X0000
    OR R5 R4
    LI R6 0X00BF
    SLL R6 R6 0X0000
    ADDIU R6 0X000A
    SW R6 R5 0X0000
    LI R6 0X00BF
    SLL R6 R6 0X0000
    ADDIU R6 0X000D
    SW R6 R0 0X0000
    NOP
    BNEZ R4 NEXT_COL
    NOP
  NOP
  BNEZ R3 NEXT_ROW
  NOP

START:
LI R1 0X0000
LI R2 0X0000
LI R3 0X0050
KEYBOARD_GET:
LI R6 0X00BF
SLL R6 R6 0X0000
ADDIU R6 0X000E
  GET:
  LW R6 R0 0X0000
  NOP
  BEQZ R0 GET
  NOP

IF_ENTER:
LI R4 0X000A
CMP R4 R0
NOP
BTEQZ ENTER
NOP

IF_BACK:
LI R4 0X0008
CMP R4 R0
NOP
BTEQZ BACK
NOP

REGULAR:
LI R4 0X0000
SLL R4 R1 0X0000
OR R4 R2
LI R6 0X00BF
SLL R6 R6 0X0000
ADDIU R6 0X000A
SW R6 R4 0X0000

LI R6 0X00BF
SLL R6 R6 0X0000
ADDIU R6 0X000D
SW R6 R0 0X0000

ADDIU R3 0XFFFF
ADDIU R2 0X0001
BEQZ R3 ENTER
NOP
B KEYBOARD_GET
NOP


ENTER:
ADDIU R1 0X0001
LI R2 0X0000
LI R3 0X0050
NOP
B KEYBOARD_GET
NOP

BACK:
ADDIU R2 0XFFFF
ADDIU R3 0X0001
LI R0 0X0020

LI R4 0X0000
SLL R4 R1 0X0000
OR R4 R2
LI R6 0X00BF
SLL R6 R6 0X0000
ADDIU R6 0X000A
SW R6 R4 0X0000

LI R6 0X00BF
SLL R6 R6 0X0000
ADDIU R6 0X000D
SW R6 R0 0X0000


NOP
B KEYBOARD_GET
NOP
